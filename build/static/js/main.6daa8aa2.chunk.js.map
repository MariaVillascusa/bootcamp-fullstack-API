{"version":3,"sources":["components/Persons.js","components/Form.js","components/Filter.js","services/persons.js","components/Notification.js","components/Error.js","components/App.js","index.js"],"names":["Person","name","number","Persons","persons","onClick","className","map","person","id","Form","onSubmit","newName","newNumber","handleNameChange","handleNumberChange","type","value","onChange","Filter","findPerson","findValue","url","personService","getAll","axios","get","then","response","data","create","newPerson","post","deletePersons","delete","update","put","Notification","message","Error","error","App","useState","setPersons","setNewName","setNewNumber","setFind","setMessage","setError","useEffect","initialPersons","catch","showErrorMessage","clearForm","filteredPersons","length","filter","toLowerCase","includes","toLocaleLowerCase","showMessage","setTimeout","errorMessage","e","target","preventDefault","personObj","updatedPerson","returnedPerson","concat","err","window","confirm","changedPerson","deletedPerson","p","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6daa8aa2.chunk.js","sourcesContent":["\nconst Person = ({ name, number }) => <p>{name} {number}</p>\n\nconst Persons = ({ persons, onClick }) => {\n    return (\n        <div className=\"numbers\">\n            {persons.map(person => {\n                return (\n                    <div className=\"personData\" key={person.id}>\n                        <Person name={person.name} number={person.number} />\n                        <button onClick={() => onClick(person.id)}>Delete</button>\n                    </div>\n                )\n            })}\n\n        </div>\n    )\n}\n\nexport default Persons","\nconst Form = ({ onSubmit, newName, newNumber, handleNameChange, handleNumberChange }) => {\n    return (\n        <form onSubmit={onSubmit}>\n            <div>\n                name: <input type=\"text\" value={newName} onChange={handleNameChange} />\n            </div>\n            <div>\n                number: <input type=\"text\" value={newNumber} onChange={handleNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\">Add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default Form","\nconst Filter = ({ findPerson, findValue }) => {\n    return (\n        <div>\n            <label>Filter shown with</label>\n            <input type=\"text\" onChange={findPerson} value={findValue} />\n        </div>\n    )\n}\n\nexport default Filter","import axios from 'axios'\n\nconst url = '/api/persons'\n\nconst getAll = () => {\n    return axios.get(url).then((response) => response.data)\n}\n\nconst create = newPerson => {\n    return axios.post(url, newPerson).then((response) => response.data)\n}\n\nconst deletePersons = (id) => {\n    return axios.delete(`${url}/${id}`).then((response) => response.data)\n}\n\nconst update = (id, newNumber) => {\n    return axios.put(`${url}/${id}`, newNumber).then((response) => response.data)\n}\n\nconst personService = {\n    getAll,\n    create,\n    deletePersons,\n    update\n}\n\nexport default personService","const Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"message\">\n        {message}\n      </div>\n    )\n  }\n\n  export default Notification","const Error = ({ error }) => {\n    if (error === null) {\n        return null\n      }\n    \n    return (\n        <div className=\"error\">\n            {error}\n        </div>\n    )\n}\n\nexport default Error","import React, { useState, useEffect } from 'react'\nimport Persons from './Persons'\nimport Form from './Form'\nimport Filter from './Filter'\nimport personService from '../services/persons'\nimport Notification from './Notification'\nimport Error from './Error'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [findValue, setFind] = useState('')\n  const [message, setMessage] = useState(null)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    setError(null)\n    personService.getAll()\n      .then(initialPersons => setPersons(initialPersons))\n      .catch(error => showErrorMessage('Something went wrong'))\n  }, [])\n\n  const addPerson = e => {\n    e.preventDefault()\n    setError(null)\n\n    const personObj = {\n      name: newName,\n      number: newNumber\n    }\n    const updatedPerson = persons.filter(person => person.name === newName)\n    if (updatedPerson.length !== 0) {\n      if (window.confirm(`${updatedPerson[0].name} is already added to phonebook, replace the old number with a new one?`)) {\n        personService.update(updatedPerson[0].id, personObj)\n          .then(changedPerson => {\n            setPersons(persons.map(person => person.id !== updatedPerson[0].id ? person : changedPerson))\n            clearForm()\n            showMessage(\"Updated\", personObj)\n          }).catch(err => showErrorMessage(`${updatedPerson[0].name} can not be updated`))\n      } else {\n        clearForm()\n      }\n      return\n    }\n\n    personService.create(personObj)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        clearForm()\n        showMessage(\"Add\", personObj)\n      }).catch(err => showErrorMessage(`${personObj.name} can not be created`))\n  }\n\n  const deletePerson = (id) => {\n    setError(null)\n    const person = persons.filter(person => person.id === id)\n    if (window.confirm(`Delete ${person[0].name} ?`)) {\n      personService\n        .deletePersons(id)\n        .then(deletedPerson => {\n          setPersons(persons.filter(p => p.id !== id))\n        }).catch(err => showErrorMessage(\n          `${person[0].name} was already removed from server`,\n        ))\n    }\n  }\n\n  const handleNameChange = e => setNewName(e.target.value)\n  const handleNumberChange = e => setNewNumber(e.target.value)\n  const clearForm = () => {\n    setNewName('')\n    setNewNumber('')\n  }\n  const findPerson = e => {\n    setFind(e.target.value)\n  }\n \n  const filteredPersons = findValue.length === 1 ?\n  persons : persons.filter(person => person.name.toLowerCase().includes(findValue.toLocaleLowerCase()))\n  \n  const showMessage = (message, person) => {\n    setMessage(`${message} ${person.name}`)\n    setTimeout(() => {\n      setMessage(null)\n    }, 2000)\n  }\n\n  const showErrorMessage = (errorMessage) => {\n    setError(errorMessage)\n    setTimeout(() => {\n      setError(null)\n    }, 7000)\n  }\n\n  return (\n    <div className=\"container\">\n      <h1>Phonebook</h1>\n      <Notification message={message} />\n      <Error error={error} />\n      <Filter findValue={findValue} findPerson={findPerson} />\n      <h2>Add a new</h2>\n      <Form onSubmit={addPerson} newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <Persons persons={filteredPersons} onClick={deletePerson} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}